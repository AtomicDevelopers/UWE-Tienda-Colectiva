@startuml guest_user_access_process_model
allow_mixing

skinparam shadow false
skinparam packageStyle rectangle
skinparam roundCorner 15
skinparam class {
  BackgroundColor #FEFECE
  BorderColor #A80036
  ArrowColor #A80036
}

' ==========================================
' MODELO DE PROCESO (UWE) - ACCESO
' ==========================================
' Este diagrama describe la estructura de los procesos de 
' autenticación y registro (Login, Registro, Recuperación).

package "Procesamiento de Acceso - Usuario Invitado" {

  ' --- Clases Base ---
  package "Base" {
    class "Confirmacion" as Confirmation <<processClass>> {
      - pregunta : String
    }
    
    class "Error Validacion" as ValidationError <<processClass>> {
      - mensaje : String
    }

    class "Procesamiento Invitado" as GuestProcessing <<processClass>>
  }

  ' ==========================================
  ' 1. PROCESO DE REGISTRO
  ' ==========================================
  package "Proceso de Registro" {
    class "Datos Entrada Registro" as RegisterInput <<processClass>> {
      - nombre : String
      - email : String
      - celular : String
      - password : String
      - validarDatos()
    }
    
    class "Proceso Registro" as RegisterProcess <<processClass>>
    
    class "Confirmacion Registro" as RegisterConfirm <<processClass>> {
      - guardarUsuario()
    }
    
    ' Relaciones
    RegisterProcess -up-|> GuestProcessing
    RegisterProcess *-- RegisterInput
    RegisterInput *-- ValidationError
    RegisterConfirm -up-|> Confirmation
    RegisterProcess ..> RegisterConfirm : result
  }

  ' ==========================================
  ' 2. PROCESO DE LOGIN
  ' ==========================================
  package "Proceso de Login" {
    class "Datos Entrada Login" as LoginInput <<processClass>> {
      - email : String
      - password : String
      - validarCredenciales()
    }
    
    class "Proceso Login" as LoginProcess <<processClass>>
    
    class "Confirmacion Login" as LoginConfirm <<processClass>> {
      - iniciarSesion()
    }
    
    ' Relaciones
    LoginProcess -up-|> GuestProcessing
    LoginProcess *-- LoginInput
    LoginInput *-- ValidationError
    LoginConfirm -up-|> Confirmation
    LoginProcess ..> LoginConfirm : result
  }

  ' ==========================================
  ' 3. RECUPERACIÓN DE CONTRASEÑA
  ' ==========================================
  package "Recuperación de Contraseña" {
    class "Datos Entrada Recuperacion" as RecoveryInput <<processClass>> {
      - email : String
      - celular: String
    }

    class "Proceso Recuperacion" as RecoveryProcess <<processClass>>
    class "Confirmacion Envio Recuperacion" as RecoveryConfirm <<processClass>>

    RecoveryProcess -up-|> GuestProcessing
    RecoveryProcess *-- RecoveryInput
    RecoveryProcess ..> RecoveryConfirm : result
  }

}

@enduml
