@startuml customer_user_activities
allow_mixing

skinparam shadow false
skinparam roundCorner 15
skinparam class {
  BackgroundColor #FEFECE
  BorderColor #A80036
  ArrowColor #A80036
}
skinparam circleBackgroundColor black

' ==========================================
' MODELO DE REQUISITOS (UWE) - DIAGRAMAS DE ACTIVIDAD
' ==========================================
' Este diagrama modela el flujo de trabajo para las actividades del Usuario Cliente.
' Se utiliza la sintaxis de clases de PlantUML para representar las acciones UWE.
'
' Stereotypes utilizados:
' <<systemAction>>  : Acción realizada por el sistema (procesamiento interno).
' <<userAction>>    : Acción realizada por el usuario (entrada de datos, clic).
' <<displayAction>> : Acción de mostrar información o formularios en la interfaz.
'
' Pins (Atributos):
' <<interactionPin>> : Datos de entrada requeridos por el usuario.
' <<displayPin>>     : Datos mostrados al usuario.
'
' Tagged Values:
' {type=form} : Indica que la acción de visualización es un formulario.
' {type=list} : Indica que la acción de visualización es una lista.

' ------------------------------------------
' 1. SELECCIÓN DE UBICACIÓN
' ------------------------------------------
package "Activity Selección de Ubicación" {
  circle " " as Loc_Start <<start>>
  circle " " as Loc_End <<end>>

  class "Lista de Ciudades" as City_List <<displayAction>> {
    {type=list}
    --
    + nombreCiudad <<displayPin>>
  }

  class "Seleccionar Ciudad" as City_Select <<userAction>> {
    --
    + selectedCityId
  }

  Loc_Start --> City_List
  City_List --> City_Select : click
  City_Select --> Loc_End
}


' ------------------------------------------
' 4. LISTAR PRODUCTOS MÃS VENDIDOS
' ------------------------------------------
package "Activity Listar Productos Más Vendidos" {
  circle " " as Prod_Start <<start>>
  circle " " as Prod_End <<end>>

  class "Lista de Productos Más Vendidos" as Prod_List <<displayAction>> {
    {type=list}
    --
    + listaProductos <<displayPin>>
  }

  class "Seleccionar Producto" as Prod_Select <<userAction>> {
    --
    + selectedProductId
  }

  class "Detalle de Producto" as Prod_Detail <<displayAction>> {
    --
    + etiqueta <<displayPin>>
    + foto <<displayPin>>
    + nombre <<displayPin>>
    + descripcion <<displayPin>>
    + precio <<displayPin>>
    + cantidadExistencia <<displayPin>>
    + botonGuardarInteres <<interactionPin>>
  }

  class "Guardar Producto Interés" as Prod_Save <<userAction>> {
    --
    + productId
  }

  Prod_Start --> Prod_List
  Prod_List --> Prod_Select : click
  Prod_Select --> Prod_Detail : view
  
  Prod_Detail --> Prod_Save : interaction
  Prod_Save --> Prod_Detail : refresh
  
  Prod_Detail --> Prod_End : back/exit
}

' ------------------------------------------
' 5. LISTAR PRODUCTOS DE INTERÃ‰S
' ------------------------------------------
package "Activity Listar Productos de Interés" {
  circle " " as Interest_Start <<start>>
  circle " " as Interest_End <<end>>

  class "Lista de Productos de Interés" as Interest_List <<displayAction>> {
    {type=list}
    --
    
    + listaProductosInteres <<displayPin>>
  }

  class "Seleccionar Producto" as Interest_Select <<userAction>> {
    --
    + selectedProductId
  }

  class "Detalle de Producto" as Interest_Detail <<displayAction>> {
    --
    + etiqueta <<displayPin>>
    + foto <<displayPin>>
    + nombre <<displayPin>>
    + descripcion <<displayPin>>
    + precio <<displayPin>>
    + cantidadExistencia <<displayPin>>
    + botonEliminarInteres <<interactionPin>>
  }

  class "Eliminar Producto Interés" as Interest_Remove <<userAction>> {
    --
    + productId
  }

  Interest_Start --> Interest_List
  Interest_List --> Interest_Select : click
  Interest_Select --> Interest_Detail : view
  
  Interest_Detail --> Interest_Remove : interaction
  Interest_Remove --> Interest_Detail : refresh
  
  Interest_Detail --> Interest_End : back/exit
}

' ------------------------------------------
' 6. VER LISTA DE TIENDA
' ------------------------------------------
package "Activity Ver Lista Tienda" {
  circle " " as Shop_Start <<start>>
  circle " " as Shop_End <<end>>

  class "Lista de Tiendas" as Shop_List <<displayAction>> {
    {type=list}
    --
    + listaTiendas <<displayPin>>
  }

  class "Seleccionar Tienda" as Shop_Select <<userAction>> {
    --
    + selectedShopId
  }

  class "Detalle Tienda" as Shop_Detail <<displayAction>> {
    --
    + infoTienda <<displayPin>>
    + opcionVerListaProductos <<interactionPin>>
    + opcionVerResumenEspaciosDisponibles <<interactionPin>>
  }

  class "Resumen Espacios Disponibles" as Space_Summary <<displayAction>> {
    --
    + infoEspacios <<displayPin>>
    + disponibilidad <<displayPin>>
  }

  Shop_Start --> Shop_List
  Shop_List --> Shop_Select : click
  Shop_Select --> Shop_Detail : view

  ' Ramificación
  Shop_Detail --> Space_Summary : ver espacios
  
  ' Rama Productos (Reuse struct)
  class "Lista Producto" as Shop_Prod_List <<displayAction>> {
    {type=list}
    --
    + listaProductos <<displayPin>>
  }

  class "Seleccionar Producto" as Shop_Prod_Select <<userAction>> {
    --
    + selectedProductId
  }

  class "Detalle de Producto" as Shop_Prod_Detail <<displayAction>> {
    --
    + etiqueta <<displayPin>>
    + foto <<displayPin>>
    + nombre <<displayPin>>
    + descripcion <<displayPin>>
    + precio <<displayPin>>
    + cantidadExistencia <<displayPin>>
    + botonGuardarInteres <<interactionPin>>
  }

  class "Guardar Producto Interés" as Shop_Prod_Save <<userAction>> {
    --
    + productId
  }

  Shop_Detail --> Shop_Prod_List : ver productos
  Shop_Prod_List --> Shop_Prod_Select : click
  Shop_Prod_Select --> Shop_Prod_Detail : view
  
  Shop_Prod_Detail --> Shop_Prod_Save : interaction
  Shop_Prod_Save --> Shop_Prod_Detail : refresh
  
  Shop_Prod_Detail --> Shop_End : back/exit
  
  Space_Summary --> Shop_End
}

' ------------------------------------------
' 7. BUSCAR PRODUCTO
' ------------------------------------------
package "Activity Buscar Producto" {
  circle " " as Search_Start <<start>>
  circle " " as Search_End <<end>>

  class "Formulario Búsqueda" as Search_Form <<displayAction>> {
    {type=form}
    --
    + Busqueda <<interactionPin>>
  }

  class "Buscar Producto" as Search_Action <<userAction>> {
    --
    + Busqueda
  }

  class "Lista Producto" as Search_List <<displayAction>> {
    {type=list}
    --
    + listaProductos <<displayPin>>
  }

  class "Seleccionar Producto" as Search_Select <<userAction>> {
    --
    + selectedProductId
  }

  class "Detalle de Producto" as Search_Detail <<displayAction>> {
    --
    + etiqueta <<displayPin>>
    + foto <<displayPin>>
    + nombre <<displayPin>>
    + descripcion <<displayPin>>
    + precio <<displayPin>>
    + cantidadExistencia <<displayPin>>
    + botonGuardarInteres <<interactionPin>>
  }

  class "Guardar Producto Interés" as Search_Save <<userAction>> {
    --
    + productId
  }

  Search_Start --> Search_Form
  Search_Form --> Search_Action : submit
  Search_Action --> Search_List : show results
  
  Search_List --> Search_Select : click
  Search_Select --> Search_Detail : view
  
  Search_Detail --> Search_Save : interaction
  Search_Save --> Search_Detail : refresh
  
  Search_Detail --> Search_End : back/exit
}

@enduml


